version: 2.1
jobs:
  build-mac:
    macos:
      xcode: "14.2.0" # تم التحديث لنسخة مدعومة
    steps:
      - checkout
      - run:
          name: Install dependencies
          command: npm install
      - run:
          name: Build Mac App
          command: |
            chmod +x build-mac.sh
            ./build-mac.sh
      - store_artifacts:
          path: dist # تم التعديل لأن electron-builder يخرج الملفات هنا
          destination: mac-output
      - store_artifacts:
          path: build-log-mac.txt # إضافة ملف السجل لتسهيل حل المشاكل مستقبلاً
          destination: logs
workflows:
  build:
    jobs:
      - build-mac
